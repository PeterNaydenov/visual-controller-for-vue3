"use strict";var e=require("ask-for-promise"),t=require("vue");module.exports=class{constructor(e={}){const r={};return this.dependencies={...e,createApp:t.createApp,createSSRApp:t.createSSRApp},{publish:this.publish(this.dependencies,r),destroy:this.destroy(r),getApp:this.getApp(r),has:e=>!!r[e]}}publish(t,r){return function(n,o,s){const i=this.has(s),{createApp:p,createSSRApp:u}=t,{isCustomElement:d}=o,c=e();if(!n)return console.error("Error: Component is undefined"),c.done(!1),c.promise;i&&this.destroy(s);let a,m=document.getElementById(s);return m?(a=""===m.innerHTML.trim()?p(n,o):u(n,o),r[s]={},a.provide("dependencies",{...t,setupUpdates:e=>r[s]=e}),d&&(a.config.isCustomElement=d),a.mount(`#${s}`),c.done(r[s]),c.promise):(console.error(`Can't find node with id: "${s}"`),c.done(!1),c.promise)}}destroy(e){return function(t){if(e[t]){let r=document.getElementById(t);return(0,r.__vue_app__.unmount)(),r.removeAttribute("data-v-app"),delete e[t],!0}return!1}}getApp(e){return function(t){const r=e[t];return r||(console.error(`App with id: "${t}" was not found.`),!1)}}};
