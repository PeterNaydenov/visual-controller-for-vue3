import e from"ask-for-promise";import{createApp as t,createSSRApp as r}from"vue";class n{constructor(e={}){const n={};return this.dependencies={...e,createApp:t,createSSRApp:r},{publish:this.publish(this.dependencies,n),destroy:this.destroy(n),getApp:this.getApp(n),has:e=>!!n[e]}}publish(t,r){return function(n,o,s){const i=this.has(s),{createApp:p,createSSRApp:u}=t,{isCustomElement:d}=o,c=e();if(!n)return console.error("Error: Component is undefined"),c.done(!1),c.promise;i&&this.destroy(s);let m,a=document.getElementById(s);return a?(m=""===a.innerHTML.trim()?p(n,o):u(n,o),r[s]={},m.provide("dependencies",{...t,setupUpdates:e=>r[s]=e}),d&&(m.config.isCustomElement=d),m.mount(`#${s}`),c.done(r[s]),c.promise):(console.error(`Can't find node with id: "${s}"`),c.done(!1),c.promise)}}destroy(e){return function(t){if(e[t]){let r=document.getElementById(t);return(0,r.__vue_app__.unmount)(),r.removeAttribute("data-v-app"),delete e[t],!0}return!1}}getApp(e){return function(t){const r=e[t];return r||(console.error(`App with id: "${t}" was not found.`),!1)}}}export{n as default};
